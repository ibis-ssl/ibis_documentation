# crane_world_model_publisher

## æ¦‚è¦

**crane_world_model_publisher**ã¯ã€Craneãƒ­ãƒœãƒƒãƒˆã‚µãƒƒã‚«ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã®ä¸­æ ¸ã¨ãªã‚‹çŸ¥è¦šãƒ»çŠ¶æ…‹æ¨å®šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ã€‚SSL Visionã‚«ãƒ¡ãƒ©ã‹ã‚‰ã®ç”Ÿãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã—ã€ãƒœãƒ¼ãƒ«ä½ç½®ã€ãƒ­ãƒœãƒƒãƒˆä½ç½®ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å¹¾ä½•å­¦ã‚’å«ã‚€çµ±ä¸€ä¸–ç•Œãƒ¢ãƒ‡ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ä¸­å¤®ãƒãƒ–ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚EKFãƒ™ãƒ¼ã‚¹ã®é«˜ç²¾åº¦ãƒœãƒ¼ãƒ«ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã€3Dç‰©ç†ãƒ¢ãƒ‡ãƒ«ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†ã«ã‚ˆã‚Šã€å…¨ã¦ã®é«˜æ¬¡è‡ªå¾‹å‹•ä½œã®åŸºç›¤ã¨ãªã‚‹ä¿¡é ¼æ€§ã®é«˜ã„ä¸–ç•ŒçŠ¶æ…‹æƒ…å ±ã‚’æä¾›ã—ã¾ã™ã€‚

## ä¸»è¦æ©Ÿèƒ½

- **SSL Visionå‡¦ç†**: ã‚«ãƒ¡ãƒ©ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã®ç‰©ä½“èªè­˜ãƒ»ä½ç½®æ¨å®š
- **3Dãƒœãƒ¼ãƒ«ç‰©ç†ãƒ¢ãƒ‡ãƒ«**: ç©ºæ°—æŠµæŠ—ãƒ»é‡åŠ›ã‚’è€ƒæ…®ã—ãŸé«˜ç²¾åº¦ãƒœãƒ¼ãƒ«è»Œé“äºˆæ¸¬
- **ãƒœãƒ¼ãƒ«ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°**: çŠ¶æ…‹ä¾å­˜ï¼ˆSTOPPED/ROLLING/FLYINGï¼‰ã®è¿½è·¡ã‚·ã‚¹ãƒ†ãƒ 
- **ãƒ­ãƒœãƒƒãƒˆçŠ¶æ…‹æ¨å®š**: ä½ç½®ãƒ»å§¿å‹¢ãƒ»é€Ÿåº¦ã®çµ±åˆæ¨å®š
- **çµ±åˆä¸–ç•Œãƒ¢ãƒ‡ãƒ«é…ä¿¡**: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã¸ã®çŠ¶æ…‹æƒ…å ±æä¾›

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ä¸Šã®å½¹å‰²

Craneã‚·ã‚¹ãƒ†ãƒ ã®**èªè­˜å±¤ã®ä¸­æ ¸**ã¨ã—ã¦ã€ç”Ÿã®ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ§‹é€ åŒ–ã•ã‚ŒãŸä¸–ç•ŒçŠ¶æ…‹ã‚’ç”Ÿæˆã—ã€ä¸Šä½ã®æˆ¦ç•¥ãƒ»åˆ¶å¾¡å±¤ã«æƒ…å ±ã‚’æä¾›ã—ã¾ã™ã€‚ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ¶ç´„ä¸‹ã§é«˜ç²¾åº¦ãªçŠ¶æ…‹æ¨å®šã‚’å®Ÿç¾ã™ã‚‹é‡è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ã€‚

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ

### ãƒ¡ã‚¤ãƒ³ãƒãƒ¼ãƒ‰

- **WorldModelPublisherComponent**: çµ±åˆä¸–ç•Œãƒ¢ãƒ‡ãƒ«é…ä¿¡ãƒãƒ¼ãƒ‰

### Visionå‡¦ç†ãƒ¬ã‚¤ãƒ¤ãƒ¼

- **VisionStreamProcessor**: SSL-Visionãƒ‡ãƒ¼ã‚¿å°‚ç”¨å‡¦ç†
  - MulticastReceiver(vision_address:vision_port)ã«ã‚ˆã‚‹ç”Ÿãƒ‡ãƒ¼ã‚¿å—ä¿¡ï¼ˆsim=trueã¯10020ã€sim=falseã¯10006ãŒæ—¢å®šï¼‰
  - SSL_WrapperPacketè§£æãƒ»Detection/Geometryãƒ•ãƒ¬ãƒ¼ãƒ å‡¦ç†
  - åº§æ¨™å¤‰æ›(mmâ†’m)ãƒ»ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ»ãƒãƒ£ã‚¿ãƒªãƒ³ã‚°æŠ‘åˆ¶
  - ãƒœãƒ¼ãƒ«ãƒ»ãƒ­ãƒœãƒƒãƒˆä½ç½®ã®åŸºæœ¬æ¨å®š

### ãƒ‡ãƒ¼ã‚¿çµ±åˆãƒ¬ã‚¤ãƒ¤ãƒ¼

- **WorldModelDataProvider**: çµ±åˆãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒ»é…ä¿¡
  - VisionStreamProcessorã‚’å«ã‚€è¤‡æ•°ã‚½ãƒ¼ã‚¹çµ±åˆ
  - ROS 2ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†(/referee, /robot_feedback)
  - ãƒãƒ¼ãƒ è¨­å®šãƒ»ã‚²ãƒ¼ãƒ çŠ¶æ…‹ãƒ»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¸ã‚ªãƒ¡ãƒˆãƒªç®¡ç†
  - æœ€çµ‚WorldModelãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ§‹ç¯‰

### ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãƒ¬ã‚¤ãƒ¤ãƒ¼

- **BallTracker**: EKFãƒ™ãƒ¼ã‚¹ãƒœãƒ¼ãƒ«è¿½è·¡
  - 6æ¬¡å…ƒçŠ¶æ…‹ãƒ™ã‚¯ãƒˆãƒ« [x,y,z,vx,vy,vz] ã«ã‚ˆã‚‹3Dè¿½è·¡
  - æ‹¡å¼µã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å®Ÿè£…ãƒ»äºˆæ¸¬æ›´æ–°ã‚µã‚¤ã‚¯ãƒ«
  - ãƒãƒãƒ©ãƒãƒ“ã‚¹è·é›¢å¤–ã‚Œå€¤æ¤œå‡º(é–¾å€¤9.0)ãƒ»è¿½è·¡ä¿¡é ¼åº¦ç®¡ç†

- **BallTrackerManager**: è¤‡æ•°ãƒœãƒ¼ãƒ«ãƒˆãƒ©ãƒƒã‚«ãƒ¼çµ±åˆç®¡ç†
  - æœ€é©ãƒˆãƒ©ãƒƒã‚«ãƒ¼é¸æŠãƒ»å¤ã„ãƒˆãƒ©ãƒƒã‚«ãƒ¼é™¤å»(1ç§’)
  - å¤–éƒ¨Tracker(224.5.23.2:tracker_port)ã¨Visionè¦³æ¸¬ã®ãƒãƒƒãƒãƒ³ã‚°ãƒ»æ–°è¦ãƒˆãƒ©ãƒƒã‚«ãƒ¼ç”Ÿæˆ

- **BallPhysicsModel**: 3Dç‰©ç†ãƒœãƒ¼ãƒ«ãƒ¢ãƒ‡ãƒ«
  - çŠ¶æ…‹ä¾å­˜ç‰©ç†è¨ˆç®—ï¼ˆSTOPPED/ROLLING/FLYINGï¼‰
  - ç©ºæ°—æŠµæŠ—ãƒ»é‡åŠ›ãƒ»åºŠé¢æ‘©æ“¦ã®çµ±åˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  - é«˜ç²¾åº¦è»Œé“äºˆæ¸¬ï¼ˆæœ€å¤§5ç§’å…ˆï¼‰

- **RobotTracker**: ãƒ­ãƒœãƒƒãƒˆçŠ¶æ…‹è¿½è·¡
  - ä½ç½®ãƒ»å§¿å‹¢ãƒ»é€Ÿåº¦ã®çµ±åˆæ¨å®š
  - Visionãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿èåˆ

### å¯è¦–åŒ–ã‚·ã‚¹ãƒ†ãƒ ï¼ˆStage 3ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®Œäº†ï¼‰

- **VisualizationManager**: çµ±åˆå¯è¦–åŒ–ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
  - 7ã¤ã®æ•£åœ¨ã—ãŸVisualizerã‚’çµ±ä¸€ç®¡ç†
  - æˆ¦ç•¥ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚ˆã‚‹å¯è¦–åŒ–ãƒ¬ãƒ™ãƒ«åˆ¶å¾¡ï¼ˆç°¡æ˜“ãƒ»æ¨™æº–ãƒ»è©³ç´°ï¼‰
  - ãƒˆãƒ”ãƒƒã‚¯åˆ¥å¯è¦–åŒ–åˆ‡ã‚Šæ›¿ãˆã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

- **VisualizationBuilderRegistry**: ãƒ“ãƒ«ãƒ€ãƒ¼çµ±ä¸€ç®¡ç†
  - ãƒªã‚½ãƒ¼ã‚¹æœ€é©åŒ–ã¨ä¸€å…ƒç®¡ç†
  - å‹•çš„ãƒ“ãƒ«ãƒ€ãƒ¼ç”Ÿæˆãƒ»å‰Šé™¤

## Visionå‡¦ç†ãƒ•ãƒ­ãƒ¼è©³ç´°

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å…¨ä½“åƒ

```text
SSL-Vision(vision_address:vision_port)
â†’ VisionStreamProcessor::processIncomingData() [10mså‘¨æœŸ]
â†’ SSL_WrapperPacketè§£æ
â†’ Detection/Geometryãƒ•ãƒ¬ãƒ¼ãƒ å‡¦ç†
â†’ ãƒœãƒ¼ãƒ«ãƒ»ãƒ­ãƒœãƒƒãƒˆåº§æ¨™å¤‰æ›ãƒ»æ¤œè¨¼
â†’ WorldModelDataProvider::getMsg()
â†’ çµ±åˆå‡¦ç†ãƒ»ãƒãƒ¼ãƒ è¨­å®šé©ç”¨
â†’ WorldModelPublisher::publishWorldModel() [16msåˆ¶å¾¡å‘¨æœŸ]
â†’ /world_modelãƒˆãƒ”ãƒƒã‚¯é…ä¿¡
```

### å‡¦ç†æ®µéšè©³ç´°

#### Phase 1: Visionå—ä¿¡ãƒ»å‰å‡¦ç†

- **MulticastReceiver**: UDPéãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°å—ä¿¡(æœ€å¤§65536ãƒã‚¤ãƒˆ)
- **ãƒ‘ã‚±ãƒƒãƒˆè§£æ**: SSL_WrapperPacket â†’ Detection/Geometry
- **ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼**: ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å¢ƒç•Œãƒã‚§ãƒƒã‚¯ãƒ»æœ‰åŠ¹æ€§æ¤œè¨¼
- **åº§æ¨™å¤‰æ›**: SSLåº§æ¨™ç³»(mm) â†’ Craneåº§æ¨™ç³»(m)

#### Phase 2: ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

- **ãƒãƒ£ã‚¿ãƒªãƒ³ã‚°æŠ‘åˆ¶**: å¯è¦–æ€§ã‚¹ã‚³ã‚¢(0.0-1.0)ãƒ»ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹é–¾å€¤
- **é€Ÿåº¦è¨ˆç®—**: ä½ç½®å·®åˆ†ã«ã‚ˆã‚‹å‹•çš„é€Ÿåº¦æ¨å®š(1msä»¥ä¸Šã®é–“éš”)
- **çŠ¶æ…‹ç®¡ç†**: ãƒ­ãƒœãƒƒãƒˆå±¥æ­´ãƒ»æ¤œå‡ºãƒ•ãƒ©ã‚°çµ±åˆ

#### Phase 3: çµ±åˆãƒ»é…ä¿¡

- **ãƒ‡ãƒ¼ã‚¿çµ±åˆ**: Vision + Referee + RobotFeedback
- **å¾Œå‡¦ç†**: ã‚¹ãƒ©ãƒƒã‚¯æ™‚é–“è¨ˆç®—ãƒ»ã‚²ãƒ¼ãƒ åˆ†æãƒ»ã‚­ãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆæ¤œå‡º
- **é…å»¶ç›£è¦–**: DelayCheckpoints ã«ã‚ˆã‚‹å‡¦ç†æ™‚é–“è¿½è·¡

### ãƒãƒ£ã‚¿ãƒªãƒ³ã‚°æŠ‘åˆ¶æŠ€è¡“

```cpp
// å¯è¦–æ€§ç®¡ç†ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
updateVisibility(history, vision_detected) {
  if (vision_detected) {
    history.visibility = min(1.0, visibility + 0.3);  // æ¤œå‡ºæ™‚ä¸Šæ˜‡
  } else {
    history.visibility = max(0.0, visibility - 0.2);  // éæ¤œå‡ºæ™‚æ¸›å°‘
  }
}

// ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹åˆ¤å®š
isVisibleRobot(history) {
  if (visibility > 0.6) return true;   // æ¤œå‡ºç¢ºå®š
  if (visibility < 0.4) return false;  // éæ¤œå‡ºç¢ºå®š
  return visibility >= 0.5;            // ä¸­é–“é ˜åŸŸã¯ä¸­å¤®å€¤åˆ¤å®š
}
```

## ãƒœãƒ¼ãƒ«ç‰©ç†ãƒ¢ãƒ‡ãƒ«è©³ç´°

### çŠ¶æ…‹å®šç¾©

```cpp
enum BallState {
  STOPPED,   // é™æ­¢çŠ¶æ…‹ï¼ˆæ‘©æ“¦ã«ã‚ˆã‚‹å®Œå…¨åœæ­¢ï¼‰
  ROLLING,   // è»¢ãŒã‚ŠçŠ¶æ…‹ï¼ˆåœ°é¢æ¥è§¦ãƒ»æ‘©æ“¦ã‚ã‚Šï¼‰
  FLYING     // é£›è¡ŒçŠ¶æ…‹ï¼ˆ3Dæ”¾ç‰©é‹å‹•ãƒ»ç©ºæ°—æŠµæŠ—ï¼‰
};
```

### 3Dç‰©ç†æ–¹ç¨‹å¼

- **é‡åŠ›**: `g = 9.81 m/sÂ²`
- **ç©ºæ°—æŠµæŠ—**: `F_drag = -k * v * |v|`ï¼ˆé€Ÿåº¦äºŒä¹—æ¯”ä¾‹ï¼‰
- **åœ°é¢æ‘©æ“¦**: `F_friction = Î¼ * N`ï¼ˆè»¢ãŒã‚Šæ‘©æ“¦ï¼‰

### äºˆæ¸¬ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

```cpp
// é£›è¡ŒçŠ¶æ…‹ã§ã®3Dè»Œé“äºˆæ¸¬
Vector3 predictPosition(double dt) {
  // é‡åŠ›ãƒ»ç©ºæ°—æŠµæŠ—ã‚’è€ƒæ…®ã—ãŸæ•°å€¤ç©åˆ†
  // åœ°é¢è¡çªæ¤œå‡ºãƒ»ãƒã‚¦ãƒ³ãƒ‰è¨ˆç®—
  // çŠ¶æ…‹é·ç§»åˆ¤å®š
}
```

## ä¾å­˜é–¢ä¿‚

### ã‚³ã‚¢ä¾å­˜

- **crane_geometry**: å¹¾ä½•å­¦è¨ˆç®—ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **crane_physics**: ç‰©ç†è¨ˆç®—ãƒ»ãƒœãƒ¼ãƒ«ãƒ¢ãƒ‡ãƒ«
- **crane_msg_wrappers**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¤‰æ›ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
- **crane_msgs**: ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å®šç¾©
- **robocup_ssl_msgs**: SSLå…¬å¼ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

### ã‚·ã‚¹ãƒ†ãƒ ä¾å­˜

- **boost**: é«˜æ€§èƒ½C++ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **eigen**: ç·šå½¢ä»£æ•°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆä¸€éƒ¨ä½¿ç”¨ï¼‰
- **libgoogle-glog-dev**: ãƒ­ã‚°å‡ºåŠ›
- **diagnostic_updater**: ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬èµ·å‹•

```bash
# å˜ä½“èµ·å‹•
ros2 run crane_world_model_publisher world_model_publisher_node

# ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³èµ·å‹•
ros2 launch crane_bringup data.launch.py
```

### ãƒˆãƒ”ãƒƒã‚¯æ§‹æˆ

```yaml
# è³¼èª­ãƒˆãƒ”ãƒƒã‚¯
/play_situation: crane_msgs/msg/PlaySituation
/robot_feedback: crane_msgs/msg/RobotFeedbackArray
/referee: robocup_ssl_msgs/msg/Referee

# é…ä¿¡ãƒˆãƒ”ãƒƒã‚¯  
/world_model: crane_msgs/msg/WorldModel

# SSL-Visioné€šä¿¡ï¼ˆUDP Multicastï¼‰
SSL-Vision: vision_address:vision_port (sim=trueã§10020ã€sim=falseã§10006ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)
```

### WorldModelãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ§‹é€ 

```yaml
# crane_msgs/msg/WorldModel.msg
std_msgs/Header header
bool on_positive_half
bool is_yellow
bool is_emplace_positive_side
uint8 our_goalie_id
uint8 their_goalie_id
uint32 our_max_allowed_bots
uint32 their_max_allowed_bots
FieldSize field_info
FieldSize penalty_area_size  
FieldSize goal_size
BallInfo ball_info
RobotInfo[] robot_info_ours
RobotInfo[] robot_info_theirs
PlaySituation play_situation
GameAnalysis game_analysis
crane_msgs/DelayCheckpoints delay_checkpoints
```

### ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®šä¾‹

```yaml
world_model_publisher:
  ros__parameters:
    # SSL-Visionè¨­å®š
    vision_address: "224.5.23.2"
    vision_port: 10020
    confidence_threshold: 0.3

    # ãƒãƒ¼ãƒ è¨­å®š
    team_name: "ibis-ssl"
    initial_team_color: "BLUE"  # or "YELLOW"
    is_emplace_positive_side: true

    # å±¥æ­´ãƒ»äºˆæ¸¬è¨­å®š  
    position_history_size: 200
    robot_acc_for_prediction: 2.5
    robot_max_vel_for_prediction: 5.0
    robot_id_mask: "1, 2, 3"  # ä½¿ç”¨ãƒ­ãƒœãƒƒãƒˆID
```

## å®Ÿè£…æˆæœã¨æŠ€è¡“ç‰¹æ€§

### ğŸ¯ ä¸»è¦æŠ€è¡“é©æ–°

**é«˜ç²¾åº¦ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çŠ¶æ…‹æ¨å®š**: SSL-Visionã‹ã‚‰çµ±åˆä¸–ç•Œãƒ¢ãƒ‡ãƒ«ã¾ã§ã®å®Œå…¨ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’16msåˆ¶å¾¡å‘¨æœŸã§å®Ÿç¾ã€‚EKFãƒ™ãƒ¼ã‚¹ãƒœãƒ¼ãƒ«è¿½è·¡ã€ãƒãƒ£ã‚¿ãƒªãƒ³ã‚°æŠ‘åˆ¶ã€3Dç‰©ç†ãƒ¢ãƒ‡ãƒ«çµ±åˆã«ã‚ˆã‚Šç«¶æŠ€ãƒ¬ãƒ™ãƒ«ã®é«˜ç²¾åº¦èªè­˜ã‚’æä¾›ã€‚

#### Visionå‡¦ç†ã®æœ€é©åŒ– âœ…

- **é«˜é€ŸUDPé€šä¿¡**: 10msã‚¿ã‚¤ãƒãƒ¼ã«ã‚ˆã‚‹éãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°å—ä¿¡ãƒ»å³åº§ã®ãƒ‘ã‚±ãƒƒãƒˆå‡¦ç†
- **ãƒãƒ£ã‚¿ãƒªãƒ³ã‚°æŠ‘åˆ¶**: ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹é–¾å€¤(0.6/0.4)ã«ã‚ˆã‚‹å®‰å®šã—ãŸæ¤œå‡ºçŠ¶æ…‹ç®¡ç†
- **åº§æ¨™ç³»çµ±ä¸€**: SSLåº§æ¨™ç³»ã‹ã‚‰Craneåº§æ¨™ç³»ã¸ã®åŠ¹ç‡çš„å¤‰æ›ãƒ»æ¤œè¨¼

#### EKFãƒœãƒ¼ãƒ«è¿½è·¡ã‚·ã‚¹ãƒ†ãƒ  âœ…

- **6æ¬¡å…ƒçŠ¶æ…‹æ¨å®š**: [x,y,z,vx,vy,vz]ã«ã‚ˆã‚‹3Dè¿½è·¡ãƒ»ãƒãƒãƒ©ãƒãƒ“ã‚¹è·é›¢å¤–ã‚Œå€¤æ¤œå‡º
- **è¤‡æ•°ãƒˆãƒ©ãƒƒã‚«ãƒ¼ç®¡ç†**: BallTrackerManagerã«ã‚ˆã‚‹æœ€é©è¿½è·¡é¸æŠãƒ»ä¿¡é ¼åº¦ç®¡ç†
- **ç‰©ç†ãƒ¢ãƒ‡ãƒ«çµ±åˆ**: çŠ¶æ…‹ä¾å­˜(STOPPED/ROLLING/FLYING)ã®é«˜ç²¾åº¦äºˆæ¸¬

#### çµ±åˆãƒ‡ãƒ¼ã‚¿ç®¡ç† âœ…

- **ãƒãƒ«ãƒã‚½ãƒ¼ã‚¹çµ±åˆ**: Vision + Referee + RobotFeedback ã®åŠ¹ç‡çš„çµ±åˆ
- **é…å»¶ç›£è¦–**: DelayCheckpointsã«ã‚ˆã‚‹å‡¦ç†æ™‚é–“è¿½è·¡ãƒ»ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ç‰¹å®š
- **å¯è¦–åŒ–çµ±ä¸€**: VisualizationManagerã«ã‚ˆã‚‹7ã¤ã®åˆ†æ•£Visualizerã®ä¸€å…ƒç®¡ç†

### ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å®Ÿç¸¾

#### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§èƒ½

- **èªè­˜ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·**: <10ms (Visionå—ä¿¡â†’WorldModelé…ä¿¡)
- **åˆ¶å¾¡å‘¨æœŸ**: 16ms (SSLç«¶æŠ€æ¨™æº–60HzåŒæœŸ)
- **äºˆæ¸¬ç²¾åº¦**: 1ç§’å¾ŒÂ±5cm (é£›è¡Œãƒœãƒ¼ãƒ«è»Œé“)

#### å®‰å®šæ€§ãƒ»ä¿¡é ¼æ€§

- **ãƒãƒ£ã‚¿ãƒªãƒ³ã‚°æŠ‘åˆ¶**: å¯è¦–æ€§ã‚¹ã‚³ã‚¢ç®¡ç†ã«ã‚ˆã‚‹æ¤œå‡ºå®‰å®šåŒ–
- **å¤–ã‚Œå€¤å‡¦ç†**: ãƒãƒãƒ©ãƒãƒ“ã‚¹è·é›¢é–¾å€¤9.0ã«ã‚ˆã‚‹ç•°å¸¸ãƒ‡ãƒ¼ã‚¿é™¤å»
- **çŠ¶æ…‹ä¸€è²«æ€§**: ãƒãƒ¼ãƒ è¨­å®šãƒ»ã‚²ãƒ¼ãƒ çŠ¶æ³ã®å‹•çš„åæ˜ 

### å®Ÿæˆ¦ç«¶æŠ€æ¤œè¨¼

- **ğŸ”¥ EKFãƒœãƒ¼ãƒ«è¿½è·¡**: RoboCup SSLå¤§ä¼šã§ã®é«˜ç²¾åº¦ãƒœãƒ¼ãƒ«çŠ¶æ…‹æ¨å®šã‚’å®Ÿè¨¼
- **ğŸ”¥ 3Dç‰©ç†äºˆæ¸¬**: ç©ºä¸­ãƒœãƒ¼ãƒ«è»Œé“äºˆæ¸¬ã«ã‚ˆã‚Šæˆ¦è¡“çš„å„ªä½æ€§ã‚’ç²å¾—
- **ğŸ”¥ çµ±åˆèªè­˜**: è¤‡æ•°ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹çµ±åˆã«ã‚ˆã‚‹é ‘å¥ãªä¸–ç•Œãƒ¢ãƒ‡ãƒ«ç”Ÿæˆ
- **ğŸ”¥ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ¶ç´„**: 16msåˆ¶å¾¡å‘¨æœŸã§ã®å®‰å®šå‹•ä½œã‚’ç«¶æŠ€ç’°å¢ƒã§ç¢ºèª

### é–‹ç™ºãƒ»ä¿å®ˆç‰¹æ€§

ğŸ”´ **é«˜æ´»å‹•**: Craneã‚·ã‚¹ãƒ†ãƒ ã®èªè­˜åŸºç›¤ã¨ã—ã¦ç¶™ç¶šçš„ãªæ”¹è‰¯ãƒ»æœ€é©åŒ–ã‚’å®Ÿæ–½ã€‚ç«¶æŠ€è¦æ±‚ã«å¿œã˜ãŸæ©Ÿèƒ½æ‹¡å¼µã¨æ€§èƒ½å‘ä¸Šã‚’ç¶™ç¶šçš„ã«å®Ÿç¾ã€‚

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç‰¹æ€§

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ¶ç´„

- **æ›´æ–°é »åº¦**: 60Hzï¼ˆSSL VisionåŒæœŸï¼‰
- **äºˆæ¸¬ç¯„å›²**: æœ€å¤§5ç§’å…ˆã¾ã§ã®è»Œé“äºˆæ¸¬
- **ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·**: <10msï¼ˆèªè­˜â†’é…ä¿¡ï¼‰

### ç²¾åº¦ç‰¹æ€§

- **ä½ç½®ç²¾åº¦**: Â±1cmï¼ˆé™æ­¢ç‰©ä½“ï¼‰
- **é€Ÿåº¦ç²¾åº¦**: Â±0.1m/sï¼ˆç§»å‹•ç‰©ä½“ï¼‰
- **äºˆæ¸¬ç²¾åº¦**: 1ç§’å¾ŒÂ±5cmï¼ˆé£›è¡Œãƒœãƒ¼ãƒ«ï¼‰

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **Visionä¿¡å·ãªã—**: ã‚«ãƒ¡ãƒ©æ¥ç¶šãƒ»ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç¢ºèª
2. **ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãƒ­ã‚¹ãƒˆ**: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ãƒ»ç’°å¢ƒå…‰ç¢ºèª
3. **äºˆæ¸¬ç²¾åº¦ä½ä¸‹**: ç‰©ç†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å†ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

---

**é–¢é€£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸**: [crane_geometry](./crane_geometry.md) | [crane_physics](./crane_physics.md) | [crane_game_analyzer](./crane_game_analyzer.md) | [robocup_ssl_comm](./robocup_ssl_comm.md)
